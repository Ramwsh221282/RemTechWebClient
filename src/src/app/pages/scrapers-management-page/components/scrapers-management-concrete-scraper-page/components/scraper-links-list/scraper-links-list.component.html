<div class="flex justify-between items-center flex-wrap gap-4 p-2">
  <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Ссылки для парсинга
    ({{ ' ' + links.length + ' ' }}
    )</h2>
  <button
    (click)="click()"
    class="cursor-pointer flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow transition duration-150 ease-in-out">
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
    Добавить ссылку
  </button>
</div>

<div class="overflow-x-auto bg-gray-50 dark:bg-gray-700 rounded-lg shadow-inner">
  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-600">
    <thead class="bg-gray-100 dark:bg-gray-800">
    <tr>
      <th scope="col"
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        Имя
      </th>
      <th scope="col"
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        URL
      </th>
      <th scope="col"
          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        Парсер
      </th>
      <th scope="col"
          class="px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        Состояние
      </th>
      <th scope="col"
          class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        Обработано
      </th>
      <th scope="col"
          class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">
        Время работы
      </th>
      <th scope="col" class="relative px-6 py-3">
        <span class="sr-only">Действия</span>
      </th>
    </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-600">
    <tr *ngFor="let link of links">
      <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm font-medium text-gray-900 dark:text-white">{{ link.name }}</div>
      </td>
      <td class="px-6 py-4">
        <div
          class="text-sm text-gray-500 dark:text-gray-400 max-w-sm truncate hover:whitespace-normal hover:overflow-visible">
          <a [href]="link.url" target="_blank"
             class="text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300">
            Click
          </a>
        </div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm text-gray-900 dark:text-white">{{ link.parserName }}</div>
        <div class="text-sm text-gray-500 dark:text-gray-400">{{ link.parserType }}</div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap text-center">
        <label class="inline-flex items-center cursor-pointer">
          <input type="checkbox" class="sr-only peer" [checked]="link.activity">
          <div (click)="changeLinkActivity(link)"
               [ngClass]="{ 'peer-checked': link.activity }"
               class="relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-600
          peer-checked:after:translate-x-full
          rtl:peer-checked:after:-translate-x-full
          peer-checked:after:border-white
          after:content-['']
          after:absolute
          after:top-[2px]
          after:start-[2px]
          after:bg-white
          after:border-gray-300
          after:rounded-full
          after:h-5
          after:w-5
          after:transition-all
          dark:border-gray-500
          peer-checked:bg-green-600">
          </div>

          <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300 sr-only">
          {{ link.activity ? 'Активна' : 'Отключена' }}
      </span>
        </label>
      </td>
      <td class="px-6 py-4 whitespace-nowrap text-right">
        <div class="text-sm text-gray-900 dark:text-white">{{ link.processed }}</div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap text-right">
        <div class="text-sm text-gray-900 dark:text-white">
          {{ link.hours }}ч {{ link.minutes }}м {{ link.seconds }}с
        </div>
      </td>
      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
        <div class="flex justify-end space-x-2">
          <button
            (click)="editClick(link)"
            class="cursor-pointer text-amber-600 hover:text-amber-900 dark:text-amber-400 dark:hover:text-amber-200">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
            </svg>
          </button>
          <button (click)="confirmRemove($event, link)"
                  class="cursor-pointer text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
          </button>
        </div>
      </td>
    </tr>
    <tr *ngIf="links.length === 0">
      <td colspan="7" class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500 dark:text-gray-400">
        <p>Для начала работы скрейпера необходимо добавить ссылки.</p>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<p-toast [position]="'bottom-right'"/>
<p-confirm-dialog/>
